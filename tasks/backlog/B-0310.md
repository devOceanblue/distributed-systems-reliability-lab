# B-0310 — MySQL 스키마(Flyway): domain/outbox/processed/projection

## Goal
Outbox/멱등/리플레이/프로젝션/실험 검증을 위한 DB 스키마를 Flyway로 구축한다.

## Tables
1) domain
- account(account_id PK, balance, updated_at)
- ledger(tx_id PK, account_id, amount, created_at)

2) outbox
- outbox_event(id PK auto, event_id, dedup_key UNIQUE, event_type, payload_json, status, attempts, next_attempt_at, last_error, created_at, updated_at)
- 인덱스: (status, next_attempt_at, id)

3) processed (멱등)
- processed_event(consumer_group, dedup_key, processed_at, topic, partition, offset)
- PK: (consumer_group, dedup_key)

4) projection
- account_projection(account_id PK, balance, version, updated_at)

5) replay audit (권장)
- replay_audit(id, source, dedup_key, replayed_at, operator, notes)

## Deliverables
- `services/*/src/main/resources/db/migration/V1__core.sql`
- seed 데이터(선택): account 10개

## Acceptance Criteria
- docker mysql에 flyway가 적용되어 모든 테이블 생성
- unique 제약으로 중복 tx_id/dedup_key 삽입 시 오류 확인 가능
