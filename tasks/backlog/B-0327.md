# B-0327 — Experiment E-007: HW/LEO/LSO + read_committed 가시성(트랜잭션)

## Goal
“메시지는 존재(LEO)하지만 read_committed 컨슈머에서 안 읽히는(LSO)”
상황을 트랜잭션 프로듀서로 재현한다.

## Setup
- transactional producer 모드 토글:
  - RELAY_PRODUCER_MODE=transactional
  - consumer isolation.level=read_committed
- Failpoint:
  - FAILPOINT_AFTER_BEGIN_TX_BEFORE_COMMIT=true (트랜잭션 open 상태로 유지)

## Steps
1) 트랜잭션 시작 → 메시지 send → commit 안 하고 대기/크래시
2) Kafka에는 레코드가 존재하지만(read_uncommitted로는 보임),
   read_committed consumer는 해당 구간에서 멈춤
3) commit 또는 abort 후 consumer가 다시 진행됨 확인

## Deliverables
- `experiments/E-007-lso-visibility.md`
- `scripts/assert/E-007.sh` (가능하면 lag/처리 정체 확인)
