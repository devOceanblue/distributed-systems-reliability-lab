# B-0325 — Experiment E-005: ✅ Retry → DLQ → Replay (dedup_key 안전)

## Goal
영구 오류 메시지를 DLQ로 격리하고, replay-worker로 재처리하여 복구하는 운영 표준을 실험한다.

## Setup
- consumer: FORCE_PERMANENT_ERROR_ON_ACCOUNT_ID=A-3 (해당 계정 이벤트는 DLQ로)
- replay-worker: rate limit 10 msg/s, filter account_id=A-3

## Steps
1) A-3 계정에 deposit 5건 발행
2) consumer가 DLQ로 보냄
3) DLQ 적재 확인
4) replay-worker로 main으로 재발행
5) assert:
   - projection이 정상 복구
   - processed_event 덕분에 replay 중복은 무해

## Deliverables
- `experiments/E-005-dlq-replay.md`
- `scripts/assert/E-005.sh`
