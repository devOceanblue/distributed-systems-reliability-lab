# B-0352 — Runtime Profiles: local(Compose) ↔ aws(Managed) 스위치 구조 확립

## Goal
동일한 애플리케이션을:
- local: docker-compose infra (PLAINTEXT Kafka, local Redis/MySQL)
- aws: MSK(IAM) + ElastiCache + Aurora
  로 바꿔 끼울 수 있도록 “실행 진입점과 환경 주입”을 표준화한다.

## Scope
### A) compose 파일 분리
- docker-compose.local.yml: infra + app(선택)
- docker-compose.aws.override.yml: infra 제외(또는 disable), app은 AWS endpoint 사용

### B) config layering
- application.yml (default=local)
- application-aws.yml (aws profile 전용)
- ENV가 최우선(12-factor)

### C) 부트스트랩 문자열 표준
- MSK endpoint는 `aws kafka get-bootstrap-brokers` 결과의 BootstrapBrokerStringSaslIam 사용
- port 9098이 포함됨

### D) 개발자 UX
- make targets:
    - make up-local / down-local
    - make up-aws (앱만) / down-aws
- docs: “AWS credential 준비(AWS_PROFILE) → endpoints 세팅 → smoke test” 순서 제공

## Deliverables
- docker-compose.local.yml / docker-compose.aws.override.yml
- Makefile
- docs/LOCAL_VS_AWS.md

## Acceptance Criteria
- 같은 서비스가 LAB_PROFILE만 바꾸면 붙는 대상이 바뀜
- AWS에서 endpoint만 바꾸면 다른 클러스터로 전환 가능 (재사용성)
