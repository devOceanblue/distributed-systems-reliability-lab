version: '3.9'
services:
  redis:
    image: redis:7.2-alpine
    command: ["redis-server", "--save", "", "--appendonly", "no"]
    ports:
      - "16389:6379"

  postgres:
    image: postgres:16-alpine
    environment:
      POSTGRES_DB: locklab
      POSTGRES_USER: lab
      POSTGRES_PASSWORD: lab
    ports:
      - "15432:5432"

  worker-a:
    image: alpine:3.20
    command: ["sh", "-c", "sleep infinity"]
    depends_on: [redis, postgres]

  worker-b:
    image: alpine:3.20
    command: ["sh", "-c", "sleep infinity"]
    depends_on: [redis, postgres]
